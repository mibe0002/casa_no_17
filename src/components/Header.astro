---
import { Image } from 'astro:assets';
import logo from '../assets/images/logo.svg';
import Link from './Link.astro';
import Link2 from './Link2.astro';
---
<div class="w-full h-auto">
    <div class="flex justify-between items-center px-10 lg:px-20 py-6 lg:py-4 border-b border-brun-800 bg-brun-25">
        <div class="hidden lg:flex items-center justify-between w-screen">
            <nav>
                <ul class="flex gap-16">
                    <li><Link href="/priser" variant="large" size="header" class="section-link">Priser</Link></li>
                    <li><Link href="/om-os" variant="large" size="header" class="section-link">Om os</Link></li>
                    <li><Link href="/galleri" variant="large" size="header" class="section-link">Galleri</Link></li>
                </ul>
            </nav>

            <Link href="/" class="transition-transform duration-200 active:scale-105 hover:scale-105">
                <Image src={logo} alt="Casa No 17's Logo" loading="eager"></Image>
                <span class="sr-only hidden">Gå til Casa No 17s forside</span>
            </Link>

            <div class="flex gap-16 items-baseline">
                <Link href="/#åbningstider" variant="large" size="header" class="section-link">Åbningstider</Link>
                <Link2 variant="lb" href="https://salonbook.one/?casa17#/">
                    Book tid
                </Link2>
            </div>
        </div>
        
        <Link href="/" class="block lg:hidden transition-transform duration-200 active:scale-105 hover:scale-105">
            <Image src={logo} alt="Casa No 17s logo" loading="eager"></Image>
        </Link>

        <!-- Mobil menu -->
        <button id="burgerButton" class="lg:hidden transition-transform duration-150 active:scale-105 hover:scale-105">
            <svg id="burgerIcon" xmlns="http://www.w3.org/2000/svg" width="48" height="48"  fill="none" viewBox="0 0 24 24" stroke="rgba(68, 48, 40, 1)">
                <path id="burgerLines" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M4 6h16M4 12h16M4 18h16"/>
                <!-- aria-label="Åbn menu" aria-expanded="false" -->
                <!-- Kryds ikonet -->
                <path id="closeLines" class="hidden" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                d="M6 18L18 6M6 6l12 12" />
            </svg>
        </button>
    </div>

    <nav id="mobileMenu" class="lg:hidden hidden transition-all duration-300 pt-8 pb-10 bg-brun-800 px-10 py-6">
        <div class="flex flex-col gap-10">
            <ul class="uppercase font-outfit flex flex-col gap-8">
                <li><Link href="/priser">Priser</Link></li>
                <li><Link href="/om-os">Om os</Link></li>
                <li><Link href="/galleri">Galleri</Link></li>
                <li><Link href="/#åbningstider">Åbningstider</Link></li>
            </ul>
            <Link2 variant="db" href="https://salonbook.one/?casa17#/" class="text-center">
                Book tid
            </Link2>
         </div>
    </nav>
</div>

<!-- Hashtag sektion underline -->
<style>
.section-link {
    position: relative;
    text-decoration: none;
    transition: color 0.3s ease;
}

.section-link::after {
    content: '';
  position: absolute;
  bottom: 0;             
  left: 50%;
  height: 2px;
  width: 0;
  background-color: var(--link-underline-color, currentColor);
  transition-property: width, left;
  transition-duration: 300ms;
  transition-timing-function: ease;
}

.section-link.active::after {
    left: 0;
    width: 100%;
}

.section-link:hover::after {
  left: 0;
  width: 100%;
}
</style>

<script>
   // JavaScript
const burgerButton = document.getElementById('burgerButton');
const mobileMenu = document.getElementById('mobileMenu');
const burgerLines = document.getElementById('burgerLines');
const closeLines = document.getElementById('closeLines');

burgerButton.addEventListener('click', () => {
  mobileMenu.classList.toggle('hidden');

  // Skift ikon
  burgerLines.classList.toggle('hidden');
  closeLines.classList.toggle('hidden');
});

// Hashtag vis underline ved active
document.addEventListener('DOMContentLoaded', () => {
    const links = document.querySelectorAll<HTMLAnchorElement>('.section-link');

    function activateLinkByHash() {
      const hash = window.location.hash;
      if (!hash) {
        links.forEach(link => link.classList.remove('active'));
        return;
      }

      links.forEach(link => {
        const linkHash = new URL(link.href).hash;
        if (linkHash === hash) {
          link.classList.add('active');
        } else {
          link.classList.remove('active');
        }
      });
    }

    activateLinkByHash();

    window.addEventListener('hashchange', activateLinkByHash);

    links.forEach(link => {
      link.addEventListener('click', () => {
        links.forEach(l => l.classList.remove('active'));
        link.classList.add('active');
      });
    });
  });
</script>

  